version: "3"
services:

  reqbaz-backend:
    build:
      context: ./reqbaz-backend
    links:
      - reqbaz-mysql:mysql
      - mobsos-data-processing:mobsos-data-processing
    ports:
      - 8080:8080

  reqbaz-mysql:
    image: mysql:5.7
    environment:
      MYSQL_ROOT_PASSWORD: reqbaz
      MYSQL_DATABASE: reqbaz
    expose:
      - 3306

  reqbaz-frontend:
    build:
      context: ./reqbaz-frontend
    links:
      - reqbaz-backend:backend
    ports:
      - 8081:8081

  activity-tracker:
    build:
      context: ./activity-tracker
    links:
      - mobsos-data-processing:mobsos-data-processing
      - activity-tracker-mysql:mysql

  activity-tracker-mysql:
    image: mysql:5.7
    environment:
      MYSQL_ROOT_PASSWORD: reqbaz
      MYSQL_DATABASE: reqbaztrack
    expose:
      - 3306

  file-service:
    build:
      context: ./file-service
    links:
      - mobsos-data-processing:mobsos-data-processing

  mobsos-data-processing:
    build:
      context: ./mobsos-data-processing
    links:
      - mobsos-data-processing-mysql:mysql

  mobsos-data-processing-mysql:
    image: mysql:5.7
    environment:
      MYSQL_ROOT_PASSWORD: mobsos
      MYSQL_DATABASE: LAS2PEERMON
    expose:
      - 3306

  adminer:
    image: adminer
    links:
      - mobsos-data-processing-mysql:db
    ports:
      - 8082:8080